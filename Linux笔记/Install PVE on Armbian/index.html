<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="google-site-verification" content="BH4dv4Ml-XWYGvVLP0WXz44VmpGZ2zyE4x4id8lYlpQ" >

<script async src="https://www.googletagmanager.com/gtag/js?id=G-QWL0JNMRP1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QWL0JNMRP1');
</script>
<meta name="yandex-verification" content="e02fd77fd1b15fd4" >
<meta name="google-adsense-account" content="ca-pub-1958043528169920">
<script async src="https://us.umami.is/script.js" data-website-id="143ae41e-5ed8-4a8d-bb7a-976fc96dbfed"></script>

    <title>Install PVE on Armbian</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://fastly.jsdelivr.net/npm/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-sv0slik/5O0JIPdLBCR2A3XDg/1U3WuDEheZfI/DI5n8Yqc3h5kjrnr46FGBNiUAJF7rE4LHKwQ/SoSLRKAxEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/lucide@0.115.0/dist/umd/lucide.min.js"></script>
<script>
    // Create callout icons
    window.addEventListener("load", () => {
        document.querySelectorAll(".callout").forEach((elem) => {
            const icon = getComputedStyle(elem).getPropertyValue('--callout-icon');
            const iconName = icon && icon.trim().replace(/^lucide-/, "");

            if (iconName) {
                const calloutTitle = elem.querySelector(".callout-title");

                if (calloutTitle) {
                    const calloutIconContainer = document.createElement("div");
                    const calloutIcon = document.createElement("i");

                    calloutIconContainer.appendChild(calloutIcon);
                    calloutIcon.setAttribute("icon-name", iconName);
                    calloutIconContainer.setAttribute("class", "callout-icon");
                    calloutTitle.insertBefore(calloutIconContainer, calloutTitle.firstChild);
                }
            }
        });

        lucide.createIcons();

        // Collapse callouts
        Array.from(document.querySelectorAll(".callout.is-collapsible")).forEach((elem) => {
            elem.querySelector('.callout-title').addEventListener("click", (event) => {
                if (elem.classList.contains("is-collapsed")) {
                    elem.classList.remove("is-collapsed");
                } else {
                    elem.classList.add("is-collapsed");
                }
            });
        });
    });
</script>


<script src="https://fastly.jsdelivr.net/npm/force-graph@1.43.0/dist/force-graph.min.js"></script>

<script defer src="https://fastly.jsdelivr.net/npm/@alpinejs/persist@3.11.1/dist/cdn.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
<script src="https://fastly.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<link href="/styles/digital-garden-base.css" rel="stylesheet">
    <link href="/styles/style.css" rel="stylesheet">


<link href="/styles/custom-style.css" rel="stylesheet">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">





<style></style>
    
    
  </head>
  <body class="theme-dark markdown-preview-view markdown-rendered markdown-preview-section title-note-icon filetree-note-icon links-note-icon backlinks-note-icon">
    
    
    
      
    <nav class="navbar">
        <div class="navbar-inner">
            <a href="/" style="text-decoration: none;">
                <h1 style="margin: 15px !important;">Yet Another Blog</h1>
            </a>
        </div>
        
            <div class="search-button align-icon" onclick="toggleSearch()">
    <span class="search-icon">
        <i icon-name="search" ></i>
    </span>
    <span class="search-text">
        <span>Search</span>
        <span style="font-size: 0.6rem; padding: 2px 2px 0 6px; text-align:center; transform: translateY(4px);" class="search-keys">
            CTRL + K
        </span>
    </span>
</div>
        
    </nav>
    
    

    
      <div class="search-container" id="globalsearch" onclick="toggleSearch()">
    <div class="search-box">
        <input type="search" id="term" placeholder="Start typing...">
        <div id="search-results"></div>
        <footer class="search-box-footer">
            <div class="navigation-hint">
                <span>Enter to select</span>
            </div>

            <div class="navigation-hint align-icon">
                <i  icon-name="arrow-up" aria-hidden="true"></i>
                <i  icon-name="arrow-down" aria-hidden="true"></i>
                <span>to navigate</span>
            </div>

            <div class="navigation-hint">
                <span>ESC to close</span>
            </div>

        </footer>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', init, false);
    document.addEventListener('DOMContentLoaded', setCorrectShortcut, false);

    window.toggleSearch = function () {
        if (document.getElementById('globalsearch').classList.contains('active')) {
            document
                .getElementById('globalsearch')
                .classList
                .remove('active');
        } else {
            document
                .getElementById('globalsearch')
                .classList
                .add('active');
            document
                .getElementById('term')
                .focus();
        }
    }

    window.toggleTagSearch = function (evt) {
        console.log(evt.textContent);
        const term = evt.textContent;
        if (term) {
            window
                .document
                .getElementById('term')
                .value = term.trim();
            window.toggleSearch();
            window.search();
        }
    }

    const loadingSvg = `
    <svg width="100" height="100" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" stroke="#fff">
      <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="2">
          <circle cx="22" cy="22" r="6" stroke-opacity="0">
              <animate attributeName="r"
                   begin="1.5s" dur="3s"
                   values="6;22"
                   calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-opacity"
                   begin="1.5s" dur="3s"
                   values="1;0" calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-width"
                   begin="1.5s" dur="3s"
                   values="2;0" calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
          <circle cx="22" cy="22" r="6" stroke-opacity="0">
              <animate attributeName="r"
                   begin="3s" dur="3s"
                   values="6;22"
                   calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-opacity"
                   begin="3s" dur="3s"
                   values="1;0" calcMode="linear"
                   repeatCount="indefinite" />
              <animate attributeName="stroke-width"
                   begin="3s" dur="3s"
                   values="2;0" calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
          <circle cx="22" cy="22" r="8">
              <animate attributeName="r"
                   begin="0s" dur="1.5s"
                   values="6;1;2;3;4;5;6"
                   calcMode="linear"
                   repeatCount="indefinite" />
          </circle>
      </g>
  </svg>`;

    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this,
                args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) 
                    func.apply(context, args);
                };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) 
                func.apply(context, args);
            };
    };

    function setCorrectShortcut() {
        if (navigator.platform.toUpperCase().indexOf('MAC') >= 0) {
            document
                .querySelectorAll(".search-keys")
                .forEach(x => x.innerHTML = "⌘ + K");
        }
    }

    function createIndex(posts) {
        const encoder = (str) => str
            .toLowerCase()
            .split(/([^a-z]|[^\x00-\x7F])/)
        const contentIndex = new FlexSearch.Document({
            cache: true,
            charset: "latin:extra",
            optimize: true,
            index: [
                {
                    field: "content",
                    tokenize: "reverse",
                    encode: encoder
                }, {
                    field: "title",
                    tokenize: "forward",
                    encode: encoder
                }, {
                    field: "tags",
                    tokenize: "forward",
                    encode: encoder
                }
            ]
        })
        posts.forEach((p, idx) => {
            contentIndex.add({
                id: idx, title: p.title, content: p.content, tags: p.tags //Change to removeHTML
            })
        });
        return contentIndex;
    }

    async function init() {
        //init offline search index

        const searchIndexDate = '2024-05-13T10:13:16.291Z';
        let shouldFetch = true;
        if(localStorage.getItem("searchIndex")) {
            let {date, docs}= JSON.parse(localStorage.getItem('searchIndex'));
            if(date === searchIndexDate){
                shouldFetch = false;
                let index = createIndex(docs);
                window.docs = docs
                window.index = index;
            }        
        }
        if(shouldFetch){
            let docs = await(await fetch('/searchIndex.json?v=2024-05-13T10:13:16.291Z')).json();
            let index = createIndex(docs);
            localStorage.setItem("searchIndex", JSON.stringify({date: '2024-05-13T10:13:16.291Z', docs}));
            window.docs = docs
            window.index = index;
        }

        //open searchmodal when ctrl + k is pressed, cmd + k on mac
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                toggleSearch();
            }
            if (e.key === 'Escape') {
                document
                    .getElementById('globalsearch')
                    .classList
                    .remove('active');
            }

            //navigate search results with arrow keys
            if (document.getElementById('globalsearch').classList.contains('active')) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        active
                            .classList
                            .remove('active');
                        if (active.nextElementSibling) {
                            active
                                .nextElementSibling
                                .classList
                                .add('active');
                        } else {
                            document
                                .querySelector('.searchresult')
                                .classList
                                .add('active');
                        }
                    } else {
                        document
                            .querySelector('.searchresult')
                            .classList
                            .add('active');
                    }

                    let currentActive = document.querySelector('.searchresult.active');
                    if (currentActive) {
                        currentActive.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});
                    }
                }
                if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        active
                            .classList
                            .remove('active');
                        if (active.previousElementSibling) {
                            active
                                .previousElementSibling
                                .classList
                                .add('active');
                        } else {
                            document
                                .querySelectorAll('.searchresult')
                                .forEach((el) => {
                                    if (!el.nextElementSibling) {
                                        el
                                            .classList
                                            .add('active');
                                    }
                                });
                        }
                    } else {
                        document
                            .querySelectorAll('.searchresult')
                            .forEach((el) => {
                                if (el.nextElementSibling) {
                                    el
                                        .classList
                                        .add('active');
                                }
                            });
                    }

                    let currentActive = document.querySelector('.searchresult.active');
                    if (currentActive) {
                        currentActive.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});
                    }

                }
                if (e.key === 'Enter') {
                    e.preventDefault();
                    let active = document.querySelector('.searchresult.active');
                    if (active) {
                        window.location.href = active
                            .querySelector("a")
                            .href;
                    }
                }
            }
        });

        const debouncedSearch = debounce(search, 200, false);
        field = document.querySelector('#term');
        field.addEventListener('keydown', (e) => {
            if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') {
                debouncedSearch();
            }
        });
        resultsDiv = document.querySelector('#search-results');

        const params = new URL(location.href).searchParams;
        if (params.get('q')) {
            field.setAttribute('value', params.get('q'));
            toggleSearch();
            search();
        }
    }
    window.lastSearch = '';
    async function search() {
        let search = field
            .value
            .trim();
        if (!search) 
            return;
        if (search == lastSearch) 
            return;
        console.log(`search for ${search}`);
        window.lastSearch = search;

        resultsDiv.innerHTML = loadingSvg;
        //let searchRequest = await fetch(`/api/search?term=${encodeURIComponent(search)}`);
        //let results = await searchRequest.json();
        let results = offlineSearch(search);
        let resultsHTML = '';
        if (!results.length) {
            let resultParagraph = document.createElement("p");
            resultParagraph.innerText = `No results for "${search}"`;
            resultsDiv.innerHTML = '';
            resultsDiv.appendChild(resultParagraph);
            return;
        }
        resultsHTML += '<div style="max-width:100%;">';
        // we need to add title, url from ref
        results.forEach(r => {
            if(r.tags && r.tags.length > 0){
                resultsHTML += `<div class="searchresult">
                    <a class="search-link" href="${r.url}">${r.title}</a>
                    <div onclick="window.location='${r.url}'">
                        <div class="header-meta">
                            <div class="header-tags">
                                ${r.tags.map(tag=>'<a class="tag" href="JavaScript:Void(0);">#'+tag+'</a>').join("")}
                            </div>
                        </div>
                        ${r.content}
                    </div>
                </div>`;
            } else {
                resultsHTML += `<div class="searchresult">
                    <a class="search-link" href="${r.url}">${r.title}</a>
                    <div onclick="window.location='${r.url}'">
                        ${r.content}
                    </div>
                </div>`;
            }
        });
        resultsHTML += '</div>';
        resultsDiv.innerHTML = resultsHTML;
    }

    function truncate(str, size) {
        //first, remove HTML
        str = str.replaceAll(/<[^>]*>/g, '');
        if (str.length < size) 
            return str;
        return str.substring(0, size - 3) + '...';
    }

    function offlineSearch(searchQuery) {
        let data = window.docs;

        let isTagSearch = searchQuery[0] === "#" && searchQuery.length > 1;

        let searchResults = isTagSearch
            ? index.search(searchQuery.substring(1), [
                {
                    field: "tags"
                }
            ])
            : index.search(searchQuery, [
                {
                    field: "title",
                    limit: 5
                }, {
                    field: "content",
                    weight: 10
                }
            ]);

        const getByField = (field) => {
            const results = searchResults.filter((x) => x.field === field)
            if (results.length === 0) {
                return []
            } else {
                return [...results[0].result]
            }
        }
        const allIds = new Set([
            ...getByField("title"),
            ...getByField("content"),
            ...getByField("tags")
        ])
        const dataIds = [...allIds];
        const finalResults = dataIds.map((id) => {
            let result = data[id];
            result.content = truncate(result.content, 400);
            result.tags = result
                .tags
                .filter((x) => x != "gardenEntry" && x != "note"); //Note is automatically added by 11ty. GardenEntry is used internally to mark the home page

            return result;
        })
        return finalResults;

    }
</script>
    

    <main class="content cm-s-obsidian ">
      <header>
        
          <h1 data-note-icon="">Install PVE on Armbian</h1>
        
        <div class="header-meta">
          
            <div class="header-tags">
              
                
              
            </div>
          <div class="timestamps"><div><i icon-name="calendar-plus"></i> <span class="human-date" data-date="2024-04-24T22:00:12.537+08:00"></span></div><div><i icon-name="calendar-clock"></i> <span class="human-date" data-date="2024-05-13T18:12:36.088+08:00"></span></div></div></div>
      
      
      </header>
      
      
      <p>76:86:BA:56:45:A1</p>
<p><a href="https://www.zhou.pp.ua/2023/08/08/n1/" target="_blank" class="external-link">https://www.zhou.pp.ua/2023/08/08/n1/</a></p>
<ol>
<li>Disable <code>NetworkManager</code></li>
</ol>
<pre><code class="language-bash">systemctl stop NetworkManager
systemctl disable NetworkManager
</code></pre>
<ol start="2">
<li>Modified the network config</li>
</ol>
<pre><code class="language-bash">vim /etc/network/interfaces 
</code></pre>
<p>Below is an example:</p>
<pre><code class="language-bash">auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
hwaddress ether fc:7c:02:28:99:0e
# the address and gateway depends on your network
# address is the ip of your armbian device
# gateway is the ip of your router
address 192.168.1.228/24
gateway 192.168.1.1
</code></pre>
<ol start="3">
<li>Customize the node name of PVE</li>
</ol>
<pre><code class="language-bash">vim /etc/hostname

eg: R08
</code></pre>
<ol start="4">
<li>Modified the <code>hosts</code></li>
</ol>
<pre><code class="language-bash">vim /etc/hosts

eg:
127.0.0.1   localhost
192.168.10.109   R08.proxmox.com R08
::1   localhost ip6-localhost ip6-loopback
fe00::0   ip6-localnet
ff00::0   ip6-mcastprefix
ff02::1   ip6-allnodes
ff02::2   ip6-allrouters

</code></pre>
<ol start="5">
<li>Then, you may <code>reboot</code> you device.</li>
<li>Backup and renew <code>debian</code> source(especially for <code>CN</code> users.)</li>
</ol>
<pre><code class="language-bash"># Backup the sources.list
mv /etc/apt/sources.list /etc/apt/sources.list.bak
</code></pre>
<pre><code class="language-bash">vim /etc/apt/sources.list
</code></pre>
<pre><code class="language-bash">deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware
deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware
deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware
deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware
</code></pre>
<ol start="7">
<li>Backup and renew <code>armbian</code> source(especially for <code>CN</code> users.)<br>
<em>This step is not as same as step <code>6</code>.</em></li>
</ol>
<pre><code class="language-bash"># Backup armbian.list
mv /etc/apt/sources.list.d/armbian.list /etc/apt/sources.list.d/armbian.list.bak
</code></pre>
<pre><code class="language-bash">vim /etc/apt/sources.list.d/armbian.list
</code></pre>
<pre><code>deb [signed-by=/usr/share/keyrings/armbian.gpg] https://mirrors.tuna.tsinghua.edu.cn/armbian bookworm main bookworm-utils bookworm-desktop
</code></pre>
<ol start="8">
<li>Set the <code>path</code> for command</li>
</ol>
<pre><code class="language-bash">export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
</code></pre>
<ol start="9">
<li>Add <code>promox</code> source for <code>armbian</code></li>
</ol>
<pre><code class="language-bash">echo &quot;deb https://mirrors.apqa.cn/proxmox/debian/pve bookworm port&quot;&gt;/etc/apt/sources.list.d/pveport.list 
</code></pre>
<pre><code class="language-file">They are rsync from mirrors.apqa.cn  
Golbal: https://global.mirrors.apqa.cn (Cloudflare)  
Korea: https://mirrors.apqa.cn  
Hong Kong: https://hk.mirrors.apqa.cn  
China: https://mirrors.lierfang.com  
Germany: https://de.mirrors.apqa.cn
</code></pre>
<ol start="10">
<li>Add trust key for <code>promox</code> source</li>
</ol>
<pre><code class="language-bash">curl https://mirrors.apqa.cn/proxmox/debian/pveport.gpg -o /etc/apt/trusted.gpg.d/pveport.gpg
</code></pre>
<ol start="11">
<li>Install PVE</li>
</ol>
<pre><code class="language-bash">apt update &amp;&amp; apt install proxmox-ve -y
</code></pre>
<p>If there pops any selection windows, you need to select the first choice.<br>
<picture src="/img/user/Linux%E7%AC%94%E8%AE%B0/assets/armbian%20-%20Proxmox%20Virtual%20Environment.jpeg" alt="armbian - Proxmox Virtual Environment.jpeg"><source       media="(max-width:480px)"
      srcset="/img/optimized/yP9sHtymo_-500.webp"
      type="image/webp"
      >
      <source       media="(max-width:480px)"
      srcset="/img/optimized/yP9sHtymo_-500.jpeg"
      >
      <source         media="(max-width:1920px)"
        srcset="/img/optimized/yP9sHtymo_-700.webp"
        type="image/webp"
        ><source         media="(max-width:1920px)"
        srcset="/img/optimized/yP9sHtymo_-700.jpeg"
        ><img       class=""
      src="/img/user/Linux%E7%AC%94%E8%AE%B0/assets/armbian%20-%20Proxmox%20Virtual%20Environment.jpeg"
      alt="armbian - Proxmox Virtual Environment.jpeg"
      width=""
      ></picture><br>
If everything works fine, you will access to your PVE via <code>https://ip:8006</code>.<br>
<em>Note</em><br>
If you encounter the following error,</p>
<pre><code class="language-bash">Errors were encountered while processing:  
pve-manager  
proxmox-ve  
E: Sub-process /usr/bin/dpkg returned an error code (1)
</code></pre>
<p>Here is a solution.</p>
<pre><code class="language-bash">rm -f /etc/pve/pve-root-ca.pem /etc/pve/priv/pve-root-ca.* /etc/pve/local/pve-ssl.*

pvecm updatecerts -f

service pveproxy restart|
</code></pre>
<p>echo &quot;deb <a href="https://mirrors.ustc.edu.cn/proxmox/debian/pve" target="_blank" class="external-link">https://mirrors.ustc.edu.cn/proxmox/debian/pve</a> bookworm pve-no-subscription&quot; &gt; /etc/apt/sources.list.d/pve-no-subscription.list</p>
<p>echo “deb <a href="https://mirrors.apqa.cn/proxmox/debian/pve" target="_blank" class="external-link">https://mirrors.apqa.cn/proxmox/debian/pve</a> bookworm port”&gt;/etc/apt/sources.list.d/pveport.list</p>
<p>curl <a href="https://mirrors.ustc.edu.cn/proxmox/debian/pve/dists/bookworm/Release.gpg" target="_blank" class="external-link">https://mirrors.ustc.edu.cn/proxmox/debian/pve/dists/bookworm/Release.gpg</a> -o /etc/apt/trusted.gpg.d/pve-no-subscription.gpg</p>
<p>curl <a href="https://mirrors.apqa.cn/proxmox/debian/pveport.gpg" target="_blank" class="external-link">https://mirrors.apqa.cn/proxmox/debian/pveport.gpg</a> -o /etc/apt/trusted.gpg.d/pveport.gpg</p>
<p><a href="https://www.zhou.pp.ua/2023/08/08/n1/" target="_blank" class="external-link">https://www.zhou.pp.ua/2023/08/08/n1/</a></p>
<p><a href="https://mirrors.apqa.cn/" target="_blank" class="external-link">https://mirrors.apqa.cn/</a></p>
<p>systemctl stop pve-ha-lrm.service<br>
systemctl stop pve-ha-crm.service<br>
systemctl disable pve-ha-lrm.service<br>
systemctl disable pve-ha-crm.service</p>
<p>systemctl stop pve-firewall.service<br>
systemctl disable pve-firewall.service</p>
<p>systemctl stop spiceproxy.service<br>
systemctl disable spiceproxy.service</p>
<p><a href="https://www.spiritlhl.net/guide/pve/pve_custom.html" target="_blank" class="external-link">https://www.spiritlhl.net/guide/pve/pve_custom.html</a></p>
<p><a href="https://images.linuxcontainers.org/images/" target="_blank" class="external-link">https://images.linuxcontainers.org/images/</a></p>
<p><a href="https://github.com/vernesong/OpenClash/releases/tag/v0.46.003-beta" target="_blank" class="external-link">https://github.com/vernesong/OpenClash/releases/tag/v0.46.003-beta</a></p>
<p>export https_proxy='<a href="http://192.168.10.139:8899" target="_blank" class="external-link">http://192.168.10.139:8899</a>'<br>
export http_proxy='<a href="http://192.168.10.139:8899" target="_blank" class="external-link">http://192.168.10.139:8899</a>'<br>
export socks5_proxy='<a href="http://192.168.10.139:9988" target="_blank" class="external-link">http://192.168.10.139:9988</a>'</p>
<p>option enabled '1'<br>
option proxy_https '<a href="http://192.168.10.139:8899" target="_blank" class="external-link">http://192.168.10.139:8899</a>'</p>
<p>iptables -t nat -A PREROUTING -i ztk4jp2wmc -p tcp --dport 8080 -j DNAT --to-destination 192.168.10.182:80<br>
iptables -A FORWARD -i ztk4jp2wmc -d 192.168.10.182 -p tcp --dport 8080 -j ACCEPT</p>
<h1 id="zero-tier-tcp-80-192-168-10-182-tcp-80" tabindex="-1">将从 ZeroTier 网络接收到的 TCP 80 端口流量转发到虚拟机 192.168.10.182 的 TCP 80 端口</h1>
<p>iptables -t nat -A PREROUTING -i ztk4jp2wmc -p tcp --dport 8001 -j DNAT --to-destination 192.168.10.182:80</p>
<h1 id="允许转发规则通过" tabindex="-1">允许转发规则通过</h1>
<p>iptables -A FORWARD -i ztk4jp2wmc -d 192.168.10.182 -p tcp --dport 80 -j ACCEPT<br>
curl -v <a href="https://gh.findyy.workers.dev/https://github.com/xiaorouji/openwrt-passwall/releases/download/4.77-4/passwall_packages_ipk_aarch64_generic.zip" target="_blank" class="external-link">https://gh.findyy.workers.dev/https://github.com/xiaorouji/openwrt-passwall/releases/download/4.77-4/passwall_packages_ipk_aarch64_generic.zip</a></p>
<pre><code class="language-bash">ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:29287#%E8%B7%9D%E7%A6%BB%E4%B8%8B%E6%AC%A1%E9%87%8D%E7%BD%AE%E5%89%A9%E4%BD%99%EF%BC%9A25%20%E5%A4%A9
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:29287#%E5%A5%97%E9%A4%90%E5%88%B0%E6%9C%9F%EF%BC%9A2024-11-20
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:29287#%F0%9F%87%BA%F0%9F%87%B8ss%E7%BE%8E%E5%9B%BD0%7C%E2%91%A0%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:13410#%F0%9F%87%BA%F0%9F%87%B8ss%E7%BE%8E%E5%9B%BD1%7C%E2%91%A0%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:29997#%F0%9F%87%BA%F0%9F%87%B8ss%E7%BE%8E%E5%9B%BD2%7C%E2%91%A0%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:23872#%F0%9F%87%AF%F0%9F%87%B5ss%E6%97%A5%E6%9C%AC0%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:47498#%F0%9F%87%AF%F0%9F%87%B5ss%E6%97%A5%E6%9C%AC1%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:45242#%F0%9F%87%AF%F0%9F%87%B5ss%E6%97%A5%E6%9C%AC2%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:18552#%F0%9F%87%AF%F0%9F%87%B5ss%E6%97%A5%E6%9C%AC3%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:40887#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF0%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:40651#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF1%7C%E2%91%A1%E5%80%8D%E7%8E%87-NetflixUnblock
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:51594#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF2%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:15317#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF3%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:49146#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF4%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:13138#%F0%9F%87%B8%F0%9F%87%ACss%E6%96%B0%E5%8A%A0%E5%9D%A10%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:34774#%F0%9F%87%B8%F0%9F%87%ACss%E6%96%B0%E5%8A%A0%E5%9D%A11%7C%E2%91%A1%E5%80%8D%E7%8E%87-NetflixUnblock
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:24571#%F0%9F%87%B8%F0%9F%87%ACss%E6%96%B0%E5%8A%A0%E5%9D%A12%7C%E2%91%A1%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:44023#%F0%9F%87%A9%F0%9F%87%AAss%E5%BE%B7%E5%9B%BD%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:42469#%F0%9F%87%AB%F0%9F%87%AEss%E8%8A%AC%E5%85%B0%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:37009#%F0%9F%87%A8%F0%9F%87%A6ss%E5%8A%A0%E6%8B%BF%E5%A4%A7%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:47579#%F0%9F%87%B5%F0%9F%87%B1ss%E6%B3%A2%E5%85%B0%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:21968#%F0%9F%87%B9%F0%9F%87%BCss%E5%8F%B0%E6%B9%BE0%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:16465#%F0%9F%87%B9%F0%9F%87%BCss%E5%8F%B0%E6%B9%BE1%7C%E2%91%A4%E5%80%8D%E7%8E%87-NetflixUnblock
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:23448#%F0%9F%87%B5%F0%9F%87%B0ss%E5%B7%B4%E5%9F%BA%E6%96%AF%E5%9D%A6%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:48053#%F0%9F%87%A6%F0%9F%87%B7ss%E9%98%BF%E6%A0%B9%E5%BB%B7%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@tj-lt_ssr.coderfan.org:13851#%F0%9F%87%B3%F0%9F%87%ACss%E5%B0%BC%E6%97%A5%E5%88%A9%E4%BA%9A%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:17267#%F0%9F%87%AB%F0%9F%87%B7ss%E6%B3%95%E5%9B%BD%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:54370#%F0%9F%87%B3%F0%9F%87%B1ss%E8%8D%B7%E5%85%B0%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:11961#%F0%9F%87%BF%F0%9F%87%A6ss%E5%8D%97%E9%9D%9E%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:31276#%F0%9F%87%AE%F0%9F%87%B9ss%E6%84%8F%E5%A4%A7%E5%88%A9%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:52573#%F0%9F%87%B9%F0%9F%87%B7ss%E5%9C%9F%E8%80%B3%E5%85%B6%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@jp-zj_ssr.coderfan.org:51826#%F0%9F%87%AE%F0%9F%87%B3ss%E5%8D%B0%E5%BA%A6%7C%E2%91%A4%E5%80%8D%E7%8E%87
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@sg6-web1.breakwalls.us:55555#%F0%9F%87%B8%F0%9F%87%ACss%E6%96%B0%E5%8A%A0%E5%9D%A1%7C%E2%91%A1%E5%80%8D%E7%8E%87-%E7%B4%A7%E6%80%A5%E5%A4%87%E7%94%A8
ss://YWVzLTI1Ni1nY206OTg3YmUxZTItYzAwNS00ZDRhLThhNDEtZDRmODUxNmY4Y2U5@hk6-web1.breakwalls.us:55555#%F0%9F%87%AD%F0%9F%87%B0ss%E9%A6%99%E6%B8%AF%7C%E2%91%A1%E5%80%8D%E7%8E%87-%E7%B4%A7%E6%80%A5%E5%A4%87%E7%94%A8

</code></pre>
<pre><code class="language-bash">config interface 'loopback'
        option ifname 'lo'
        option proto 'static'
        option ipaddr '127.0.0.1'
        option netmask '255.0.0.0'

config interface 'wan'
        option ifname 'eth0'
        option proto 'dhcp'

config interface 'wan6'
        option ifname 'eth0'
        option proto 'dhcpv6'
</code></pre>
<p>src/gz openwrt_core <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/targets/armsr/armv8/packages" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/targets/armsr/armv8/packages</a></p>
<p>src/gz openwrt_base <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/base" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/base</a></p>
<p>src/gz openwrt_luci <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/luci" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/luci</a></p>
<p>src/gz openwrt_packages <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/packages" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/packages</a></p>
<p>src/gz openwrt_routing <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/routing" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/routing</a></p>
<p>src/gz openwrt_telephony <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/telephon" target="_blank" class="external-link">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/23.05.3/packages/aarch64_generic/telephon</a></p>
<p>pct create 102 /mnt/KingSton/template/cache/immortalwrt-rockchip-armv8-friendlyarm_nanopc-t4-rootfs.tar.gz --ostype unmanaged --hostname ImmortalWrt --arch arm64 --cores 2 --memory 512 --swap 0 -net0 bridge=vmbr0,name=eth0</p>

      
      
    </main>

    
      <aside>
      <div class="sidebar">
            <div class="sidebar-container">
                  
                  

                  
                        
                        
                              <div class="toc">
                                    <div class="toc-title-container">
                                          <div class="toc-title">
                                                On this page
                                          </div>
                                    </div>
                                    <div class="toc-container">
                                          <nav class="toc">
                <ol>
                    
                    <li><a href="#zero-tier-tcp-80-192-168-10-182-tcp-80">将从 ZeroTier 网络接收到的 TCP 80 端口流量转发到虚拟机 192.168.10.182 的 TCP 80 端口</a>
            		</li>

                    <li><a href="#允许转发规则通过">允许转发规则通过</a>
            		</li>
                </ol>
            </nav>
                                    </div>
                              </div>
                        

                  

                        
                  
            </div>
      </div>
</aside>
    

    
      
<style>
#tooltip-wrapper {
  background: var(--background-primary);
  padding: 1em;
  border-radius: 4px;
  overflow: hidden;
  position: fixed;
  width: 80%;
  max-width: 400px;
  height: auto;
  max-height: 300px;
  font-size: 0.8em;
  box-shadow: 0 5px 10px rgba(0,0,0,0.1);
  opacity: 0;
  transition: opacity 100ms;
  unicode-bidi: plaintext;
  overflow-y: scroll;
  z-index: 10;
}

#tooltip-wrapper:after {
  content: "";
  position: absolute;
  z-index: 1;
  bottom: 0;
  left: 0;
  pointer-events: none;
  width: 100%;
  unicode-bidi: plaintext;
  height: 75px;
}
</style>
<div style="opacity: 0; display: none;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  var linkHistories = {};

  function hideTooltip() {
    opacityTimeout = setTimeout(function () {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function () {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop;
    var url = event.target.getAttribute("href");
    if (url.indexOf("http") === -1 || url.indexOf(window.location.host) !== -1) {
      let contentURL = url.split('#')[0]
      if (!linkHistories[contentURL]) {
        iframe.src = contentURL
        iframe.onload = function () {
          tooltipContentHtml = ''
          tooltipContentHtml += '<div style="font-weight: bold; unicode-bidi: plaintext;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
          tooltipContentHtml += iframe.contentWindow.document.querySelector('.content').innerHTML
          tooltipContent.innerHTML = tooltipContentHtml
          linkHistories[contentURL] = tooltipContentHtml
          tooltipWrapper.style.display = 'block';
          tooltipWrapper.scrollTop = 0;
          setTimeout(function () {
            tooltipWrapper.style.opacity = 1;
            if (url.indexOf("#") != -1) {
              let id = url.split('#')[1];
              const focus = tooltipWrapper.querySelector(`[id='${id}']`);
              focus.classList.add('referred');
              console.log(focus);
              focus.scrollIntoView({behavior: 'smooth'}, true)
            } else {
              tooltipWrapper.scroll(0, 0);
            }
          }, 1)
        }
      } else {
        tooltipContent.innerHTML = linkHistories[contentURL]
        tooltipWrapper.style.display = 'block';
        setTimeout(function () {
          tooltipWrapper.style.opacity = 1;
          if (url.indexOf("#") != -1) {
              let id = url.split('#')[1];
              const focus = tooltipWrapper.querySelector(`[id='${id}']`);
              focus.classList.add('referred');
              focus.scrollIntoView({behavior: 'smooth'}, true)
          } else {
              tooltipWrapper.scroll(0, 0);
          }
        }, 1)
      }

      function getInnerWidth(elem) {
        var style = window.getComputedStyle(elem);
        return elem.offsetWidth - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight) - parseFloat(style.borderLeft) - parseFloat(style.borderRight) - parseFloat(style.marginLeft) - parseFloat(style.marginRight);
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";

      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
        tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
        tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
        tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function (_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function (_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function (event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function (event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  window.addEventListener("load", function(event) 
  {
    document.querySelectorAll('.internal-link').forEach(setupListeners);
    document.querySelectorAll('.backlink-card a').forEach(setupListeners);
  });
</script>

    
        <script>
      if (window.location.hash) {
        document.getElementById(window.location.hash.slice(1)).classList.add('referred');
      }
      window.addEventListener('hashchange', (evt) => {
        const oldParts = evt.oldURL.split("#");
        if (oldParts[1]) {
          document.getElementById(oldParts[1]).classList.remove('referred');
        }
        const newParts = evt.newURL.split("#");
        if (newParts[1]) {
          document.getElementById(newParts[1]).classList.add('referred');
        }
      }, false);
      const url_parts = window.location.href.split("#")
      const url = url_parts[0];
      const referrence = url_parts[1];
      document.querySelectorAll(".cm-s-obsidian > *[id]").forEach(function (el) {
        el.ondblclick = function(evt) {
          const ref_url = url + '#' + evt.target.id
          navigator.clipboard.writeText(ref_url);
      }
      });

      
    </script>
    <script src=" https://fastly.jsdelivr.net/npm/luxon@3.2.1/build/global/luxon.min.js "></script>
<script defer>
    TIMESTAMP_FORMAT = "MMM dd, yyyy h:mm a";
    document.querySelectorAll('.human-date').forEach(function (el) {
        el.innerHTML = luxon.DateTime.fromISO(el.getAttribute('data-date') || el.innerText).toFormat(TIMESTAMP_FORMAT);
      });
</script>
    
    
    <script>
lucide.createIcons({
            attrs: {
                class: ["svg-icon"]
            }
        });
</script>
  </body>
</html>
